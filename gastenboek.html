<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gastenboek — Hotel Aurora</title>
  <link rel="stylesheet" href="style.css">
  <meta name="description" content="Ervaringen van gasten bij Hotel Aurora — authentieke reviews, gemiddelde waardering en recente berichten.">
  <meta name="robots" content="index,follow">
</head>
<body>
  <!-- Header (identiek aan andere pagina's) -->
  <header class="header" id="site-header">
    <div class="container header-inner">
      <div class="logo"><a href="index.html" style="color:inherit;text-decoration:none;">Hotel Aurora</a></div>
      <nav class="nav" aria-label="Hoofdmenu">
        <a href="index.html">Home</a>
        <a href="kamers.html">Onze kamers</a>
        <a href="faciliteiten.html">Faciliteiten</a>
        <a href="team.html">Ons team</a>
        <a href="vacatures.html">Vacatures</a>
        <a href="gastenboek.html" aria-current="page">Gastenboek</a>
        <a class="cta" href="beschikbaarheid.html" role="button">Beschikbaarheid</a>
      </nav>
    </div>
  </header>

  <section class="hero" aria-labelledby="gk-hero">
  <!-- Hero-beeld (vervang src door je eigen foto indien gewenst) -->
  <img src="images/hero-ai.jpg" alt="Hotel Aurora: rustige gevel en tuin bij zonsopgang" class="hero-media" />

  <!-- Subtiele overlay voor betere leesbaarheid -->
  <div class="hero-overlay" aria-hidden="true"></div>

  <div class="container" style="position:relative; z-index:2; padding:var(--space-lg) 0;">
    <div class="hero-content">
      <h1 id="gk-hero">Gastenboek</h1>
      <p class="lead">Lees eerlijke ervaringen van gasten die bij ons verbleven. Deel uw indrukken — uw feedback helpt ons verbeteren en geeft toekomstige bezoekers een realistisch beeld van het verblijf.</p>

      <div style="margin-top:1rem;">
        <a class="button primary" href="#review-form-heading" aria-label="Plaats een review">Plaats een review</a>
        <a class="button ghost" href="#reviews-heading" aria-label="Bekijk recensies">Bekijk recensies</a>
      </div>
    </div>
  </div>
</section>

  <main>
    <section class="section">
      <div class="container">
        <div style="display:flex; gap:var(--space-lg); align-items:center; flex-wrap:wrap; justify-content:space-between;">
          <div>
            <div class="kicker">Ervaringen</div>
            <h2 style="margin-top:.5rem;">Wat gasten over ons zeggen</h2>
            <p class="sr-note" style="margin-top:.5rem;">Gemiddelde beoordeling gebaseerd op recente inzendingen. Alle reviews worden local-first opgeslagen en weergegeven.</p>
          </div>

          <div style="display:flex; gap:var(--space); align-items:center;">
            <div class="avg-rating">
              <div class="score" id="avg-score">—</div>
              <div style="text-align:left;">
                <div style="font-weight:700;" id="avg-stars">—</div>
                <div class="count" id="total-count">0 reviews</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Reviews listing -->
        <div id="reviews-grid" class="reviews-grid" style="margin-top:var(--space-lg);"></div>

        <div id="no-reviews" class="empty-state" style="margin-top:var(--space-lg); display:none;">
          <strong>Nog geen reviews</strong>
          <p style="margin:.5rem 0 0 0;">We nodigen u uit om de eerste gastreview te schrijven — eerlijk, kort en behulpzaam voor andere reizigers.</p>
        </div>

        <!-- Review form (styled like apply-card) -->
        <section aria-labelledby="review-form-heading" style="margin-top:var(--space-lg);">
          <div class="kicker">Plaats een review</div>
          <h3 id="review-form-heading" style="margin-top:.5rem;">Deel uw ervaring</h3>
          <p class="prose" style="margin-top:.5rem;">Uw review helpt ons verbeteren en biedt toekomstige gasten een realistisch beeld van hun verblijf. We tonen alleen voornaam + initiaal en de tekst (geen e-mails publiekelijk).</p>

          <div class="apply-card" style="margin-top:var(--space);">
            <form id="review-form" onsubmit="addReview(event)" novalidate>
              <div class="apply-grid" style="grid-template-columns: 1fr 140px;">
                <div>
                  <label for="rev-name">Naam</label>
                  <input id="rev-name" class="input" placeholder="Voornaam en initiaal (bijv. Lisa V.)" required />
                </div>

                <div>
                  <label for="rev-rating">Waardering</label>
                  <select id="rev-rating" class="input" required>
                    <option value="">Kies</option>
                    <option value="5">5 — Uitstekend</option>
                    <option value="4">4 — Zeer goed</option>
                    <option value="3">3 — Goed</option>
                    <option value="2">2 — Matig</option>
                    <option value="1">1 — Onvoldoende</option>
                  </select>
                </div>

                <div style="grid-column: 1 / -1;">
                  <label for="rev-text">Bericht</label>
                  <textarea id="rev-text" class="input" rows="5" placeholder="Schrijf kort over uw verblijf: sfeer, service of een tip voor anderen." required></textarea>
                </div>
              </div>

              <div class="apply-actions">
                <button class="button primary" type="submit">Plaats review</button>
                <button class="btn-ghost" type="button" onclick="document.getElementById('review-form').reset();">Reset</button>
              </div>

              <div id="rev-feedback" aria-live="polite" style="margin-top:.75rem;"></div>
            </form>
          </div>
        </section>

      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="site-footer" role="contentinfo">
    <div class="container" style="display:flex; gap:var(--space-lg); flex-wrap:wrap; align-items:flex-start; padding-top:1.25rem; padding-bottom:1.25rem;">
      <div style="flex:1 1 360px;">
        <h4 style="margin-top:0;">Hotel Aurora</h4>
        <p style="margin:.25rem 0;">© 2026 Hotel Aurora</p>
      </div>
      <div style="flex:1 1 240px;">
        <h5 style="margin:.25rem 0;">Snel naar</h5>
        <ul style="list-style:none; padding:0; margin:0;">
          <li><a href="index.html">Home</a></li>
          <li><a href="kamers.html">Onze kamers</a></li>
          <li><a href="faciliteiten.html">Faciliteiten</a></li>
          <li><a href="team.html">Ons team</a></li>
        </ul>
      </div>
      <div style="flex:1 1 240px;">
        <h5 style="margin:.25rem 0;">Contact</h5>
        <p style="margin:0;">info@hotel-aurora.example<br/>+31 20 123 4567</p>
      </div>
    </div>
  </footer>

  <script>
    // Sticky header shadow (consistent across site)
    (function(){
      const header = document.getElementById('site-header');
      const onScroll = () => header.classList.toggle('scrolled', window.scrollY > 10);
      window.addEventListener('scroll', onScroll, {passive:true});
      onScroll();
    })();

    // Simple helper to escape text for insertion
    function escapeHtml(text){
      if(!text) return '';
      return text.replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]; });
    }

    // Local storage key for reviews
    const STORAGE_KEY = 'aurora_reviews_v1';

    // Credible initial reviews (used if no localStorage)
    const initialReviews = [
      {name: 'Sofie B.', date: '2026-01-18', rating:5, text:'Prachtig verblijf: rustige ligging en uitstekende service. Ontbijt met lokale producten was bijzonder smaakvol.'},
      {name: 'Mark v.', date: '2026-01-10', rating:4, text:'Charmant hotel met persoonlijke service. Kamer en bedden zeer comfortabel — fijne uitvalsbasis voor wandelingen.'},
      {name: 'Lieke K.', date: '2025-12-21', rating:5, text:'Perfecte combinatie van rust en kwaliteit. De spa is kleinschalig maar heel verzorgd.'}
    ];

    function loadReviews(){
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if(raw){
          const parsed = JSON.parse(raw);
          if(Array.isArray(parsed) && parsed.length) return parsed;
        }
      } catch(e){}
      return initialReviews.slice();
    }

    function saveReviews(list){
      try { localStorage.setItem(STORAGE_KEY, JSON.stringify(list)); } catch(e){}
    }

    let reviews = loadReviews();

    function renderReviews(){
      const grid = document.getElementById('reviews-grid');
      const noState = document.getElementById('no-reviews');
      grid.innerHTML = '';
      if(!reviews || reviews.length === 0){
        noState.style.display = 'block';
        document.getElementById('avg-score').textContent = '—';
        document.getElementById('avg-stars').textContent = '—';
        document.getElementById('total-count').textContent = '0 reviews';
        return;
      } else {
        noState.style.display = 'none';
      }

      const avg = reviews.reduce((s,r)=> s + (r.rating||0),0) / reviews.length;
      const avgRounded = Math.round(avg*10)/10;
      document.getElementById('avg-score').textContent = avgRounded.toFixed(1);
      document.getElementById('avg-stars').textContent = '★'.repeat(Math.round(avg)) + '☆'.repeat(5 - Math.round(avg));
      document.getElementById('total-count').textContent = `${reviews.length} reviews`;

      const list = reviews.slice().sort((a,b)=> new Date(b.date) - new Date(a.date));
      list.forEach(r => {
        const el = document.createElement('article');
        el.className = 'review card reveal';
        el.setAttribute('role','article');

        let displayDate = r.date;
        if(/^\d{4}-\d{2}-\d{2}$/.test(r.date)){
          const d = new Date(r.date);
          displayDate = d.toLocaleDateString('nl-NL', {day:'2-digit', month:'short', year:'numeric'});
        }

        el.innerHTML = `
          <header style="display:flex; justify-content:space-between; align-items:center;">
            <div>
              <strong>${escapeHtml(r.name)}</strong>
              <div class="meta">${displayDate}</div>
            </div>
            <div class="rating" aria-label="Waardering: ${r.rating} van 5">${'★'.repeat(r.rating)}${'☆'.repeat(5-r.rating)}</div>
          </header>
          <p style="margin-top:.6rem;">${escapeHtml(r.text)}</p>
        `;
        grid.appendChild(el);
      });

      observeReveals();
    }

    function observeReveals(){
      const revs = document.querySelectorAll('.reveal');
      const io = new IntersectionObserver((entries, observer) => {
        entries.forEach(e=>{
          if(e.isIntersecting){
            e.target.classList.add('is-visible');
            observer.unobserve(e.target);
          }
        });
      }, {threshold: 0.08});
      revs.forEach(r => io.observe(r));
    }

    function addReview(e){
      e.preventDefault();
      const nameEl = document.getElementById('rev-name');
      const ratingEl = document.getElementById('rev-rating');
      const textEl = document.getElementById('rev-text');
      const fb = document.getElementById('rev-feedback');

      const name = nameEl.value.trim();
      const rating = parseInt(ratingEl.value,10);
      const text = textEl.value.trim();

      if(!name || !rating || !text){
        fb.style.color = 'crimson';
        fb.textContent = 'Vul alle velden in aub.';
        return;
      }

      const nameParts = name.split(/\s+/);
      const displayName = nameParts.length > 1 ? `${nameParts[0]} ${nameParts[1].charAt(0)}.` : nameParts[0];

      const today = new Date();
      const isoDate = today.toISOString().slice(0,10);

      const newReview = {
        name: displayName,
        date: isoDate,
        rating: rating,
        text: text
      };

      reviews.unshift(newReview);
      if(reviews.length > 200) reviews = reviews.slice(0,200);
      saveReviews(reviews);
      renderReviews();

      fb.style.color = 'var(--color-deep-green)';
      fb.textContent = 'Bedankt! Uw review is toegevoegd.';
      document.getElementById('review-form').reset();
      setTimeout(()=>{ nameEl.focus(); }, 400);
    }

    // initial render
    renderReviews();
  </script>
</body>
</html>
